% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/raster-tools.R
\name{euiss_crop_raster}
\alias{euiss_crop_raster}
\title{Crop and project raster to match spatial extent and CRS}
\usage{
euiss_crop_raster(
  raster,
  crop_extent,
  crs,
  buffer = 0,
  aggregate_fact = 1,
  to_dataframe = FALSE,
  normalize = FALSE,
  column_name = "value",
  ...
)
}
\arguments{
\item{raster}{SpatRaster object to crop and project.}

\item{crop_extent}{Extent to crop to (SpatExtent, sf object, or bbox).}

\item{crs}{Target coordinate reference system.}

\item{buffer}{Buffer distance around crop extent (in extent's CRS units).}

\item{aggregate_fact}{Aggregation factor for downsampling (default: 1).}

\item{to_dataframe}{Convert result to data frame? (default: FALSE)}

\item{normalize}{Normalize values to 0-1 range? (default: FALSE)}

\item{column_name}{Name for raster values column in df output (default: "value").}

\item{...}{Additional arguments passed to terra functions.}
}
\value{
SpatRaster object or data frame with raster data.
}
\description{
Crops raster to specified extent, projects to new CRS, and optionally
converts to data frame.
}
\details{
Processing steps:
\enumerate{
  \item Apply buffer to crop extent (if specified)
  \item Crop raster to (buffered) extent
  \item Aggregate if factor > 1
  \item Project to target CRS
  \item Optionally normalize values
  \item Optionally convert to data frame
}
}
\examples{
\dontrun{
# Load data
raster <- euiss_load_raster("elevation.tif")
countries <- euiss_gisco(res = "20")
albania <- countries[countries$NAME_ENGL == "Albania", ]

# Crop and project
albania_elev <- euiss_crop_raster(
  raster,
  crop_extent = albania,
  crs = "+proj=laea +lat_0=41 +lon_0=20",
  buffer = 10000
)

# Convert to data frame for ggplot
albania_df <- euiss_crop_raster(
  raster,
  crop_extent = albania,
  crs = 3857,
  to_dataframe = TRUE,
  normalize = TRUE
)
}

}
