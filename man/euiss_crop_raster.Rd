% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/raster-tools.R
\name{euiss_crop_raster}
\alias{euiss_crop_raster}
\title{Crop and project a raster to match spatial extent and CRS}
\usage{
euiss_crop_raster(
  raster,
  crop_extent,
  crs,
  buffer = 0,
  aggregate_fact = 1,
  to_dataframe = FALSE,
  normalize = FALSE,
  column_name = "value",
  ...
)
}
\arguments{
\item{raster}{A SpatRaster object to be cropped and projected.}

\item{crop_extent}{Extent to crop to. Can be SpatExtent, sf object, or bbox.}

\item{crs}{Target coordinate reference system for projection.}

\item{buffer}{Buffer distance around crop extent (in units of crop_extent's CRS).}

\item{aggregate_fact}{Aggregation factor for downsampling (for performance).}

\item{to_dataframe}{Logical. Convert result to data frame?}

\item{normalize}{Logical. Normalize values to 0-1 range?}

\item{column_name}{Name for raster values column in data frame output.}

\item{...}{Additional arguments passed to terra functions.}
}
\value{
Either a SpatRaster object or a tibble/data frame with raster data.
}
\description{
This function crops a raster to a specified extent, projects it to a new
coordinate reference system, and optionally converts it to a data frame.
}
\details{
The function performs the following steps:
\enumerate{
  \item Applies buffer to crop extent if specified
  \item Crops raster to the (buffered) extent
  \item Aggregates raster if aggregation factor > 1
  \item Projects to target CRS
  \item Optionally normalizes values
  \item Optionally converts to data frame format
}
}
\examples{
\dontrun{
# Load sample data
raster <- euiss_load_raster("elevation.tif")
countries <- euiss_gisco(res = "20")
albania <- countries[countries$NAME_ENGL == "Albania", ]

# Crop and project
albania_elevation <- euiss_crop_raster(
  raster, 
  crop_extent = albania,
  crs = "+proj=laea +lat_0=41 +lon_0=20",
  buffer = 10000
)

# Convert to data frame for ggplot
albania_df <- euiss_crop_raster(
  raster,
  crop_extent = albania,
  crs = 3857,
  to_dataframe = TRUE,
  normalize = TRUE
)
}

}
