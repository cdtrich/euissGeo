% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/visualization.R
\name{euiss_spikemap}
\alias{euiss_spikemap}
\title{Create spike map coordinates from spatial data}
\usage{
euiss_spikemap(
  data,
  val,
  fact = 1e+05,
  spread = NULL,
  of_largest_polygon = TRUE,
  drop_geom = TRUE,
  polygon_format = TRUE,
  min_value = NULL,
  max_spikes = NULL
)
}
\arguments{
\item{data}{Simple Features (sf) object with polygon or point geometries.}

\item{val}{Variable name for spike height/value (unquoted).}

\item{fact}{Scaling factor for spike height relative to map extent.}

\item{spread}{Width factor for spike base. If NULL, defaults to fact/50.}

\item{of_largest_polygon}{For multipolygons, use largest polygon centroid? (default: TRUE)}

\item{drop_geom}{Drop geometry column from output? (default: TRUE)}

\item{polygon_format}{Return data for geom_polygon()? (default: TRUE)}

\item{min_value}{Minimum value threshold - spikes below this won't be drawn.}

\item{max_spikes}{Maximum number of spikes to draw (keeps largest values).}
}
\value{
Data frame with coordinates for spike visualizations.
}
\description{
Transforms sf object into coordinates for spike visualizations where height
represents data values. Spikes are triangular shapes extending from polygon centroids.
}
\details{
Creates triangular spikes where:
\itemize{
  \item Base width controlled by \code{spread}
  \item Height proportional to \code{val * fact}
  \item Base positioned at polygon centroid
  \item Peak extends upward from centroid
}

Experiment with \code{fact} parameter for appropriate spike heights.
Typical values: 0.0001 to 100000 depending on coordinate system and data range.
}
\examples{
\dontrun{
# Load country data
countries <- euiss_gisco(res = "20")
countries$population <- runif(nrow(countries), 1e6, 1e8)

# Create spike data
spike_data <- euiss_spikemap(
  countries,
  val = population,
  fact = 100000
)

# Plot with ggplot2
library(ggplot2)
ggplot() +
  geom_sf(data = countries, fill = "lightgray") +
  geom_polygon(
    data = spike_data,
    aes(x = x, y = y, group = spike_id, fill = val),
    color = "darkred"
  ) +
  theme_void()
}

}
